<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>To-Do App with Analytics</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
  </style>

  <script>
    !function(t,e){var o,n,p,r;e.__SV||(window.posthog=e,e._i=[],e.init=function(i,s,a){function g(t,e){var o=e.split(".");2==o.length&&(t=t[o[0]],e=o[1]),t[e]=function(){t.push([e].concat(Array.prototype.slice.call(arguments,0)))}}(p=t.createElement("script")).type="text/javascript",p.crossOrigin="anonymous",p.async=!0,p.src=s.api_host.replace(".i.posthog.com","-assets.i.posthog.com")+"/static/array.js",(r=t.getElementsByTagName("script")[0]).parentNode.insertBefore(p,r);var u=e;for(void 0!==a?u=e[a]=[]:a="posthog",u.people=u.people||[],u.toString=function(t){var e="posthog";return"posthog"!==a&&(e+="."+a),t||(e+=" (stub)"),e},u.people.toString=function(){return u.toString(1)+".people (stub)"},o="init capture identify alias people.set people.set_once people.unset people.increment people.append people.union people.remove people.delete_group people.set_group register register_once unregister opt_out_capturing has_opted_out_capturing opt_in_capturing has_opted_in_capturing reset isFeatureEnabled onFeatureFlags reloadFeatureFlags getFeatureFlag getFeatureFlagPayload on getEarlyAccessFeatures updateEarlyAccessFeatureEnrollment startSessionRecording stopSessionRecording sessionRecordingStarted".split(" "),n=0;n<o.length;n++)g(u,o[n]);e._i.push([i,s,a])},e.__SV=1)}(document,window.posthog||[]);
    posthog.init('phc_VY1XY8ymwOk6ZdsiakE3BNuTuXzKviRVkhwZOPiW1OB', {
        api_host: 'https://us.i.posthog.com',
        person_profiles: 'identified_only',
    });
  </script>
</head>
<body class="bg-slate-100 flex items-center justify-center min-h-screen">

  <div class="bg-white rounded-xl shadow-lg w-full max-w-md p-8">
    <h1 class="text-3xl font-bold text-center text-slate-800">To-Do List</h1>
    <p class="text-center text-slate-500 mt-2 mb-6">Tasks + PostHog analytics in one place</p>

    <div class="mb-4">
      <label for="username" class="block text-sm font-medium text-slate-700">Your Name</label>
      <input type="text" id="username" class="mt-1 block w-full px-3 py-2 border border-slate-300 rounded-md shadow-sm text-sm placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" placeholder="Enter your name">
      <button id="identify-user" class="mt-2 w-full bg-blue-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-600 transition">Set User</button>
    </div>

    <div class="flex gap-2 mb-6">
      <input type="text" id="task-input" class="flex-grow px-3 py-2 border border-slate-300 rounded-md shadow-sm text-sm placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500 focus:border-blue-500" placeholder="New task...">
      <button id="add-task" class="bg-slate-800 text-white font-semibold py-2 px-4 rounded-lg hover:bg-slate-700 transition">Add</button>
    </div>

    <ul id="task-list" class="space-y-3"></ul>
  </div>

  <script>
    const usernameInput = document.getElementById('username');
    const identifyBtn = document.getElementById('identify-user');
    const taskInput = document.getElementById('task-input');
    const addTaskBtn = document.getElementById('add-task');
    const taskList = document.getElementById('task-list');

    let currentUser = 'Anonymous';

    identifyBtn.addEventListener('click', () => {
      const name = usernameInput.value.trim();
      if (!name) return;
      currentUser = name;
      posthog.identify(currentUser, { name: currentUser });
      alert(`User set as: ${currentUser}`);
    });

    addTaskBtn.addEventListener('click', () => {
      const text = taskInput.value.trim();
      if (!text) return;
      posthog.capture('task_added', {
        length: text.length,
        user: currentUser
      });
      addTask(text);
      taskInput.value = '';
    });

    function addTask(text) {
      const li = document.createElement('li');
      li.className = 'flex items-center justify-between bg-slate-50 p-3 rounded-lg border border-slate-200';

      const span = document.createElement('span');
      span.textContent = text;
      span.className = 'text-slate-800';
      li.appendChild(span);

      const controls = document.createElement('div');

      const doneBtn = document.createElement('button');
      doneBtn.textContent = 'Done';
      doneBtn.className = 'text-xs font-semibold text-green-600 hover:text-green-800 mr-2';
      doneBtn.onclick = () => {
        li.classList.toggle('bg-green-100');
        span.classList.toggle('line-through');
        posthog.capture('task_completed', { user: currentUser });
      };

      const delBtn = document.createElement('button');
      delBtn.textContent = 'Delete';
      delBtn.className = 'text-xs font-semibold text-red-600 hover:text-red-800';
      delBtn.onclick = () => {
        taskList.removeChild(li);
        posthog.capture('task_deleted', { user: currentUser });
      };

      controls.appendChild(doneBtn);
      controls.appendChild(delBtn);
      li.appendChild(controls);
      taskList.appendChild(li);
    }
  </script>
</body>
</html>


